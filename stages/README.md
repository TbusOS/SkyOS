# SkyOS 分阶段学习目录结构

## 📁 目录组织原则

SkyOS按照16周的教学计划分为7个阶段，每个阶段都有独立的目录结构：

```
stages/
├── stage01/    # 阶段一：ARM32基础与引导 (Week 1-2)
├── stage02/    # 阶段二：ARM异常处理与中断 (Week 3-4)
├── stage03/    # 阶段三：ARM内存管理 (Week 5-7)
├── stage04/    # 阶段四：进程管理与上下文切换 (Week 8-10)
├── stage05/    # 阶段五：设备树与驱动框架 (Week 11-13)
├── stage06/    # 阶段六：文件系统与存储 (Week 14-15)
└── stage07/    # 阶段七：系统优化与调试 (Week 16)
```

## 📂 每个阶段的目录结构

每个阶段目录包含以下标准子目录：

```
stageXX/
├── docs/           # 理论文档和技术说明
│   ├── README.md   # 本阶段总体介绍
│   ├── theory/     # 理论知识文档
│   └── reference/  # 参考资料和手册
├── labs/           # 实验指导和练习
│   ├── labXX.md    # 实验指导书
│   ├── exercises/  # 练习题和解答
│   └── examples/   # 示例代码
├── code/           # 本阶段的源代码
│   ├── boot/       # 启动相关代码
│   ├── kernel/     # 内核代码
│   ├── drivers/    # 驱动代码
│   ├── include/    # 头文件
│   └── Makefile    # 构建脚本
└── resources/      # 辅助资源
    ├── tools/      # 开发工具
    ├── configs/    # 配置文件
    └── data/       # 测试数据
```

## 🎯 阶段概览

### 阶段一：ARM32基础与引导 (Week 1-2)
- **目标**: 理解ARM32架构、寄存器、指令集
- **内容**: ARM汇编引导程序，UART输出，异常向量表
- **输出**: 在QEMU上显示"Hello SkyOS"

### 阶段二：ARM异常处理与中断 (Week 3-4)
- **目标**: 理解ARM异常模型、中断控制器(GIC)
- **内容**: 异常向量表、IRQ处理程序、系统调用机制
- **输出**: 支持定时器中断的基础内核

### 阶段三：ARM内存管理 (Week 5-7)
- **目标**: 理解ARM MMU、页表结构、虚拟内存
- **内容**: MMU配置、页面分配器、虚拟内存映射
- **输出**: 支持虚拟内存的内核

### 阶段四：进程管理与上下文切换 (Week 8-10)
- **目标**: ARM上下文切换、进程控制块、调度器
- **内容**: 进程创建、ARM上下文切换汇编代码、调度算法
- **输出**: 支持多进程的操作系统

### 阶段五：设备树与驱动框架 (Week 11-13)
- **目标**: 理解设备树、平台设备驱动模型
- **内容**: 设备树解析、UART/GPIO驱动、设备匹配机制
- **输出**: 支持设备树的驱动框架

### 阶段六：文件系统与存储 (Week 14-15)
- **目标**: 简单文件系统、SD卡/eMMC访问
- **内容**: 块设备层、FAT32文件系统、VFS
- **输出**: 支持文件读写的完整系统

### 阶段七：系统优化与调试 (Week 16)
- **目标**: 性能优化、调试工具、硬件移植
- **内容**: 性能监控、JTAG调试、板卡移植
- **输出**: 可在真实ARM硬件上运行的教学OS

## 🚀 如何使用

### 1. 按阶段学习
```bash
# 进入某个阶段
cd stages/stage01

# 阅读阶段说明
cat docs/README.md

# 查看实验指导
ls labs/

# 编译运行代码
cd code
make all
make run
```

### 2. 跨阶段对比
```bash
# 比较不同阶段的实现差异
diff -r stages/stage01/code/ stages/stage02/code/

# 查看功能演进
git log --oneline stages/stage01/ stages/stage02/
```

### 3. 完整构建
```bash
# 在项目根目录，构建最新版本
make stage=07 all
```

## 📋 依赖关系

每个阶段都依赖前面阶段的成果：

```
stage01 → stage02 → stage03 → stage04 → stage05 → stage06 → stage07
```

- **向前兼容**: 新阶段的代码包含之前所有功能
- **模块化设计**: 每个阶段的新增功能相对独立
- **增量学习**: 学生可以逐步理解复杂概念

## 🔧 开发规范

### 代码规范
- 每个阶段的代码都要能独立编译运行
- 新增功能通过条件编译控制
- 保持代码风格一致性

### 文档规范
- 每个阶段都要有完整的文档
- 理论文档要引用权威资料
- 实验指导要步骤清晰

### 测试规范
- 每个阶段都要有功能验证
- 提供自动化测试脚本
- 支持回归测试

## 📊 学习建议

### 对于学生
1. **循序渐进**: 不要跳跃阶段，确保每个阶段都掌握
2. **动手实践**: 每个阶段都要亲自编译运行
3. **做好笔记**: 记录每个阶段的学习要点
4. **对比分析**: 理解不同阶段间的差异和联系

### 对于教师
1. **灵活调整**: 可根据实际情况调整阶段进度
2. **重点突出**: 每个阶段都有明确的重点
3. **实践导向**: 理论结合实际编程
4. **及时反馈**: 每个阶段结束都要有评估

---

这个分阶段的目录结构让整个学习过程更加清晰有序，便于教学管理和学生学习。 